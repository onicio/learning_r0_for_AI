<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Learning Epidemiology Platform</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.net.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #0f0f23;
            color: #333;
            padding: 20px;
            position: relative;
            min-height: 100vh;
        }
        
        #vanta-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
            position: relative;
            z-index: 1;
        }
        
        .header {
            background: linear-gradient(135deg, #2d3748 0%, #1a202c 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }
        
        .tabs {
            display: flex;
            background: #f7fafc;
            border-bottom: 2px solid #e2e8f0;
        }
        
        .tab {
            flex: 1;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
        }
        
        .tab:hover {
            background: #edf2f7;
        }
        
        .tab.active {
            background: white;
            border-bottom: 3px solid #667eea;
            color: #667eea;
        }
        
        .content {
            padding: 30px;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .control-panel {
            background: #f7fafc;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 30px;
        }
        
        .control-group {
            margin-bottom: 20px;
        }
        
        .control-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #2d3748;
        }
        
        .control-group input[type="range"] {
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: #cbd5e0;
            outline: none;
            -webkit-appearance: none;
        }
        
        .control-group input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
        }
        
        .control-group input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
        }
        
        .value-display {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.9em;
            margin-left: 10px;
        }
        
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .card {
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 20px;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        
        .card h3 {
            color: #2d3748;
            margin-bottom: 15px;
            font-size: 1.3em;
        }
        
        .metric {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            background: #f7fafc;
            border-radius: 8px;
            margin-bottom: 10px;
        }
        
        .metric-label {
            font-weight: 600;
            color: #4a5568;
        }
        
        .metric-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #667eea;
        }
        
        .chart-container {
            position: relative;
            height: 400px;
            margin-bottom: 20px;
        }
        
        #network-viz {
            width: 100%;
            height: 600px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            background: #ffffff;
            position: relative;
            overflow: hidden;
        }
        
        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 20px;
            padding: 15px;
            background: #f7fafc;
            border-radius: 8px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 2px solid #2d3748;
        }
        
        .btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .info-box {
            background: #ebf4ff;
            border-left: 4px solid #4299e1;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .gnn-layer {
            background: #faf5ff;
            border: 2px solid #9f7aea;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
        }
        
        .gnn-layer h4 {
            color: #6b46c1;
            margin-bottom: 10px;
        }
        
        .progress-bar {
            width: 100%;
            height: 30px;
            background: #e2e8f0;
            border-radius: 15px;
            overflow: hidden;
            margin-top: 10px;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transition: width 0.5s;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }
        
        .footer {
            background: linear-gradient(135deg, #2d3748 0%, #1a202c 100%);
            color: white;
            padding: 30px;
            text-align: center;
            margin-top: 20px;
        }
        
        .footer-text {
            font-size: 0.95em;
            margin-bottom: 15px;
            opacity: 0.9;
        }
        
        .footer-text a {
            color: #667eea;
            text-decoration: none;
            font-weight: 600;
        }
        
        .footer-text a:hover {
            color: #7c8ff5;
            text-decoration: underline;
        }
        
        .footer-logo {
            margin-top: 20px;
        }
        
        .footer-logo img {
            max-width: 300px;
            height: auto;
            opacity: 0.95;
            transition: opacity 0.3s;
        }
        
        .footer-logo img:hover {
            opacity: 1;
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            animation: fadeIn 0.3s;
        }
        
        .modal-content {
            background-color: white;
            margin: 10% auto;
            padding: 30px;
            border-radius: 16px;
            width: 80%;
            max-width: 600px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            animation: slideIn 0.3s;
        }
        
        @keyframes slideIn {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e2e8f0;
        }
        
        .modal-header h2 {
            color: #2d3748;
            margin: 0;
        }
        
        .close-modal {
            color: #a0aec0;
            font-size: 32px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s;
        }
        
        .close-modal:hover {
            color: #2d3748;
        }
        
        .modal-body {
            color: #4a5568;
            line-height: 1.6;
            margin-bottom: 20px;
        }
        
        .modal-warning {
            background: #fff5f5;
            border-left: 4px solid #fc8181;
            padding: 15px;
            margin: 15px 0;
            border-radius: 8px;
        }
        
        .modal-footer {
            text-align: right;
        }
        
        .filter-panel {
            background: #f7fafc;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
        }
        
        .filter-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            align-items: center;
        }
        
        .filter-group label {
            font-weight: 600;
            color: #2d3748;
        }
        
        .filter-group select, .filter-group input {
            padding: 8px 12px;
            border: 2px solid #cbd5e0;
            border-radius: 8px;
            font-size: 0.9em;
            transition: border-color 0.3s;
        }
        
        .filter-group select:focus, .filter-group input:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .leaderboard-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        .leaderboard-table th {
            background: #667eea;
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: 600;
        }
        
        .leaderboard-table td {
            padding: 12px;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .leaderboard-table tr:hover {
            background: #f7fafc;
        }
        
        .rank-badge {
            display: inline-block;
            width: 30px;
            height: 30px;
            line-height: 30px;
            text-align: center;
            border-radius: 50%;
            font-weight: bold;
            color: white;
        }
        
        .rank-1 { background: #ffd700; color: #2d3748; }
        .rank-2 { background: #c0c0c0; color: #2d3748; }
        .rank-3 { background: #cd7f32; color: white; }
        .rank-other { background: #cbd5e0; color: #2d3748; }
    </style>
</head>
<body>
    <div id="vanta-bg"></div>
    <div class="container">
        <div class="header">
            <h1>ü¶†üë©‚Äçüíº Learning R‚ÇÄ for AI: Network-driven strategies to advance women upskilling in health workplaces</h1>
            <p>AI Skill Diffusion Through Workplace Networks</p>
        </div>
        
        <div class="tabs">
            <div class="tab active" onclick="switchTab('seir')">SEIR Model</div>
            <div class="tab" onclick="switchTab('network')">Network Analysis</div>
            <div class="tab" onclick="switchTab('gnn')">GNN Predictions</div>
            <div class="tab" onclick="switchTab('interventions')">Interventions</div>
            <div class="tab" onclick="switchTab('leaderboard')">Training Pipeline</div>
        </div>
        
        <div class="content">
            <!-- SEIR Model Tab -->
            <div id="seir" class="tab-content active">
                <div class="info-box">
                    <strong>Learning Epidemiology:</strong> We model AI skill acquisition as an epidemic. Workers move from Susceptible (no AI skills) ‚Üí Exposed (aware of AI) ‚Üí Infected (learning AI) ‚Üí Recovered (proficient in AI).
                </div>
                
                <div class="control-panel">
                    <h3>SEIR Parameters</h3>
                    <div class="grid">
                        <div class="control-group">
                            <label>Learning R‚ÇÄ (Reproduction Number) <span class="value-display" id="r0-val">2.5</span></label>
                            <input type="range" id="r0" min="0.5" max="5" step="0.1" value="2.5">
                            <small>Average number of colleagues influenced by each trained person</small>
                        </div>
                        
                        <div class="control-group">
                            <label>Exposure Rate (Œ≤) <span class="value-display" id="beta-val">0.3</span></label>
                            <input type="range" id="beta" min="0.1" max="0.9" step="0.05" value="0.3">
                            <small>Rate at which susceptible workers become exposed to AI training</small>
                        </div>
                        
                        <div class="control-group">
                            <label>Incubation Rate (œÉ) <span class="value-display" id="sigma-val">0.2</span></label>
                            <input type="range" id="sigma" min="0.05" max="0.5" step="0.05" value="0.2">
                            <small>Rate at which exposed workers begin active learning</small>
                        </div>
                        
                        <div class="control-group">
                            <label>Recovery Rate (Œ≥) <span class="value-display" id="gamma-val">0.15</span></label>
                            <input type="range" id="gamma" min="0.05" max="0.5" step="0.05" value="0.15">
                            <small>Rate at which learning workers become proficient</small>
                        </div>
                    </div>
                    <button class="btn" onclick="resetSEIR()">Reset Simulation</button>
                </div>
                
                <div class="chart-container">
                    <canvas id="seir-chart"></canvas>
                </div>
                
                <div class="grid">
                    <div class="card">
                        <h3>Current State (Day <span id="current-day">0</span>)</h3>
                        <div class="metric">
                            <span class="metric-label">Susceptible</span>
                            <span class="metric-value" id="s-count">950</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Exposed</span>
                            <span class="metric-value" id="e-count">30</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Infected (Learning)</span>
                            <span class="metric-value" id="i-count">20</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Recovered (Proficient)</span>
                            <span class="metric-value" id="r-count">0</span>
                        </div>
                    </div>
                    
                    <div class="card">
                        <h3>Gender Distribution</h3>
                        <div class="metric">
                            <span class="metric-label">Women Proficient</span>
                            <span class="metric-value" id="women-prof">0%</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Men Proficient</span>
                            <span class="metric-value" id="men-prof">0%</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Gender Gap</span>
                            <span class="metric-value" id="gender-gap">0%</span>
                        </div>
                    </div>
                    
                    <div class="card">
                        <h3>Location Analysis</h3>
                        <div class="metric">
                            <span class="metric-label">Rural Coverage</span>
                            <span class="metric-value" id="rural-cov">0%</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Tribal Coverage</span>
                            <span class="metric-value" id="tribal-cov">0%</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Urban Coverage</span>
                            <span class="metric-value" id="urban-cov">0%</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Network Analysis Tab -->
            <div id="network" class="tab-content">
                <div class="info-box">
                    <strong>Social Network Analysis:</strong> Visualization of actual collaboration patterns. Node size represents influence (betweenness centrality). Colors indicate current learning state.
                </div>
                
                <div class="filter-panel">
                    <h3 style="margin-bottom: 15px;">Network Filters</h3>
                    <div class="filter-group">
                        <label>State:</label>
                        <select id="filter-state">
                            <option value="all">All States</option>
                            <option value="S">Susceptible</option>
                            <option value="E">Exposed</option>
                            <option value="I">Infected (Learning)</option>
                            <option value="R">Recovered (Proficient)</option>
                        </select>
                        
                        <label>Gender:</label>
                        <select id="filter-gender">
                            <option value="all">All</option>
                            <option value="Female">Female</option>
                            <option value="Male">Male</option>
                        </select>
                        
                        <label>Location:</label>
                        <select id="filter-location">
                            <option value="all">All Locations</option>
                            <option value="Urban">Urban</option>
                            <option value="Rural">Rural</option>
                            <option value="Tribal">Tribal</option>
                        </select>
                        
                        <label>Role:</label>
                        <select id="filter-role">
                            <option value="all">All Roles</option>
                            <option value="Nurse">Nurse</option>
                            <option value="Analyst">Analyst</option>
                            <option value="Manager">Manager</option>
                            <option value="Educator">Educator</option>
                            <option value="Technician">Technician</option>
                        </select>
                        
                        <button class="btn" onclick="applyNetworkFilters()">Apply Filters</button>
                        <button class="btn" style="background: #cbd5e0; color: #2d3748;" onclick="resetNetworkFilters()">Reset</button>
                    </div>
                </div>
                
                <div id="network-viz"></div>
                
                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-color" style="background: #440154;"></div>
                        <span>Susceptible</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #31688e;"></div>
                        <span>Exposed</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #35b779;"></div>
                        <span>Infected (Learning)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #fde725;"></div>
                        <span>Recovered (Proficient)</span>
                    </div>
                </div>
                
                <div class="grid">
                    <div class="card">
                        <h3>Network Metrics</h3>
                        <div class="metric">
                            <span class="metric-label">Network Density</span>
                            <span class="metric-value" id="density">0.12</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Avg. Clustering</span>
                            <span class="metric-value" id="clustering">0.34</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Avg. Path Length</span>
                            <span class="metric-value" id="path-length">3.2</span>
                        </div>
                    </div>
                    
                    <div class="card">
                        <h3>Key Influencers</h3>
                        <div id="influencers-list"></div>
                    </div>
                    
                    <div class="card">
                        <h3>Isolated Nodes</h3>
                        <div class="metric">
                            <span class="metric-label">Women Isolated</span>
                            <span class="metric-value" id="women-isolated">12</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Rural Isolated</span>
                            <span class="metric-value" id="rural-isolated">18</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Tribal Isolated</span>
                            <span class="metric-value" id="tribal-isolated">8</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- GNN Predictions Tab -->
            <div id="gnn" class="tab-content">
                <div class="info-box">
                    <strong>Graph Neural Networks:</strong> Multi-layer GNN architecture predicts individual learning outcomes based on network position, demographics, and peer effects.
                </div>
                
                <div class="gnn-layer">
                    <h4>Layer 1: Node Feature Encoding</h4>
                    <p><strong>Input:</strong> Demographics (gender, location), current state, network position</p>
                    <p><strong>Output:</strong> 64-dimensional embeddings</p>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 100%">Trained</div>
                    </div>
                </div>
                
                <div class="gnn-layer">
                    <h4>Layer 2: Graph Convolution</h4>
                    <p><strong>Operation:</strong> Aggregate features from neighbors weighted by edge strength</p>
                    <p><strong>Equation:</strong> h<sub>v</sub><sup>(l+1)</sup> = œÉ(Œ£<sub>u‚ààN(v)</sub> W<sup>(l)</sup>h<sub>u</sub><sup>(l)</sup>/|N(v)|)</p>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 100%">Trained</div>
                    </div>
                </div>
                
                <div class="gnn-layer">
                    <h4>Layer 3: Attention Mechanism</h4>
                    <p><strong>Operation:</strong> Learn importance weights for different neighbor types (mentor, peer, supervisor)</p>
                    <p><strong>Output:</strong> Attention-weighted 32-dimensional embeddings</p>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 100%">Trained</div>
                    </div>
                </div>
                
                <div class="gnn-layer">
                    <h4>Layer 4: Classification</h4>
                    <p><strong>Operation:</strong> Predict learning state transition probabilities</p>
                    <p><strong>Output:</strong> 4-class probabilities (S, E, I, R)</p>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 100%">Trained</div>
                    </div>
                </div>
                
                <div class="card">
                    <h3>GNN Performance Metrics</h3>
                    <div class="grid">
                        <div class="metric">
                            <span class="metric-label">Overall Accuracy</span>
                            <span class="metric-value">87.3%</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Women Accuracy</span>
                            <span class="metric-value">85.1%</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Rural Accuracy</span>
                            <span class="metric-value">83.8%</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Tribal Accuracy</span>
                            <span class="metric-value">81.5%</span>
                        </div>
                    </div>
                </div>
                
                <div class="chart-container">
                    <canvas id="gnn-predictions-chart"></canvas>
                </div>
                
                <div class="card">
                    <h3>High-Risk Individuals (Low Predicted Learning)</h3>
                    <div id="high-risk-list"></div>
                </div>
            </div>
            
            <!-- Interventions Tab -->
            <div id="interventions" class="tab-content">
                <div class="info-box">
                    <strong>Counterfactual Simulations:</strong> Test intervention strategies before deployment. Each scenario shows predicted impact on learning R‚ÇÄ and equity metrics.
                </div>
                
                <div class="grid">
                    <div class="card">
                        <h3>Intervention 1: Peer Champions</h3>
                        <p>Identify and train 10 high-centrality women as AI peer champions</p>
                        <div class="metric">
                            <span class="metric-label">Predicted R‚ÇÄ Increase</span>
                            <span class="metric-value">+0.8</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Gender Gap Reduction</span>
                            <span class="metric-value">-12%</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Rural Reach Increase</span>
                            <span class="metric-value">+23%</span>
                        </div>
                        <button class="btn" onclick="applyIntervention(1)">Simulate Impact</button>
                    </div>
                    
                    <div class="card">
                        <h3>Intervention 2: Bridge Training</h3>
                        <p>Target training at network bridges connecting isolated clusters</p>
                        <div class="metric">
                            <span class="metric-label">Predicted R‚ÇÄ Increase</span>
                            <span class="metric-value">+0.6</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Tribal Coverage Increase</span>
                            <span class="metric-value">+35%</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Avg Path Length Reduction</span>
                            <span class="metric-value">-0.7</span>
                        </div>
                        <button class="btn" onclick="applyIntervention(2)">Simulate Impact</button>
                    </div>
                    
                    <div class="card">
                        <h3>Intervention 3: Micro-Cohorts</h3>
                        <p>Create small learning groups based on natural collaboration patterns</p>
                        <div class="metric">
                            <span class="metric-label">Predicted R‚ÇÄ Increase</span>
                            <span class="metric-value">+1.2</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Women Participation</span>
                            <span class="metric-value">+28%</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Learning Rate Increase</span>
                            <span class="metric-value">+15%</span>
                        </div>
                        <button class="btn" onclick="applyIntervention(3)">Simulate Impact</button>
                    </div>
                </div>
                
                <div class="chart-container">
                    <canvas id="intervention-chart"></canvas>
                </div>
            </div>
            
            <!-- Training Pipeline Tab -->
            <div id="leaderboard" class="tab-content">
                <div class="info-box">
                    <strong>Training Pipeline & Performance:</strong> Track AI skill development across organizational units and monitor learning diffusion effectiveness.
                </div>
                
                <div class="grid">
                    <div class="card">
                        <h3>Overall Training Progress</h3>
                        <div class="metric">
                            <span class="metric-label">Total Trainees</span>
                            <span class="metric-value">847</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Completion Rate</span>
                            <span class="metric-value">73%</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Avg Learning R‚ÇÄ</span>
                            <span class="metric-value">2.8</span>
                        </div>
                    </div>
                    
                    <div class="card">
                        <h3>Gender Equity Metrics</h3>
                        <div class="metric">
                            <span class="metric-label">Women Enrolled</span>
                            <span class="metric-value">465 (55%)</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Women Completed</span>
                            <span class="metric-value">351 (75%)</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Gender Parity Index</span>
                            <span class="metric-value">1.08</span>
                        </div>
                    </div>
                    
                    <div class="card">
                        <h3>Diffusion Velocity</h3>
                        <div class="metric">
                            <span class="metric-label">Avg Days to Proficiency</span>
                            <span class="metric-value">42</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Peer Influence Rate</span>
                            <span class="metric-value">68%</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Network Density</span>
                            <span class="metric-value">0.18</span>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <h3>üèÜ Organizational Unit Leaderboard - Learning R‚ÇÄ Performance</h3>
                    <table class="leaderboard-table">
                        <thead>
                            <tr>
                                <th>Rank</th>
                                <th>Organization</th>
                                <th>Category</th>
                                <th>Learning R‚ÇÄ</th>
                                <th>Completion Rate</th>
                                <th>Women Participation</th>
                                <th>Diffusion Speed</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span class="rank-badge rank-1">1</span></td>
                                <td>MEZCOPH - Data Science Unit</td>
                                <td>Academic</td>
                                <td><strong>3.4</strong></td>
                                <td>89%</td>
                                <td>62%</td>
                                <td>38 days</td>
                            </tr>
                            <tr>
                                <td><span class="rank-badge rank-2">2</span></td>
                                <td>Banner Health - Analytics Team</td>
                                <td>Private Sector</td>
                                <td><strong>3.1</strong></td>
                                <td>85%</td>
                                <td>58%</td>
                                <td>41 days</td>
                            </tr>
                            <tr>
                                <td><span class="rank-badge rank-3">3</span></td>
                                <td>Pima County Health Dept</td>
                                <td>County Government</td>
                                <td><strong>2.9</strong></td>
                                <td>78%</td>
                                <td>67%</td>
                                <td>45 days</td>
                            </tr>
                            <tr>
                                <td><span class="rank-badge rank-other">4</span></td>
                                <td>MEZCOPH - Epidemiology</td>
                                <td>Academic</td>
                                <td><strong>2.7</strong></td>
                                <td>81%</td>
                                <td>71%</td>
                                <td>43 days</td>
                            </tr>
                            <tr>
                                <td><span class="rank-badge rank-other">5</span></td>
                                <td>Tohono O'odham Nation Health</td>
                                <td>Tribal Government</td>
                                <td><strong>2.6</strong></td>
                                <td>74%</td>
                                <td>65%</td>
                                <td>48 days</td>
                            </tr>
                            <tr>
                                <td><span class="rank-badge rank-other">6</span></td>
                                <td>Arizona Dept of Health Services</td>
                                <td>State Government</td>
                                <td><strong>2.5</strong></td>
                                <td>76%</td>
                                <td>54%</td>
                                <td>52 days</td>
                            </tr>
                            <tr>
                                <td><span class="rank-badge rank-other">7</span></td>
                                <td>Dignity Health - IT Division</td>
                                <td>Private Sector</td>
                                <td><strong>2.4</strong></td>
                                <td>72%</td>
                                <td>49%</td>
                                <td>47 days</td>
                            </tr>
                            <tr>
                                <td><span class="rank-badge rank-other">8</span></td>
                                <td>Cochise County Health</td>
                                <td>County Government</td>
                                <td><strong>2.3</strong></td>
                                <td>69%</td>
                                <td>61%</td>
                                <td>55 days</td>
                            </tr>
                            <tr>
                                <td><span class="rank-badge rank-other">9</span></td>
                                <td>Navajo Nation Health Services</td>
                                <td>Tribal Government</td>
                                <td><strong>2.2</strong></td>
                                <td>67%</td>
                                <td>68%</td>
                                <td>58 days</td>
                            </tr>
                            <tr>
                                <td><span class="rank-badge rank-other">10</span></td>
                                <td>Yuma County Public Health</td>
                                <td>County Government</td>
                                <td><strong>2.1</strong></td>
                                <td>64%</td>
                                <td>56%</td>
                                <td>61 days</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="chart-container">
                    <canvas id="pipeline-chart"></canvas>
                </div>
            </div>
        </div>
        
        <!-- Intervention Modal -->
        <div id="intervention-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>‚ö†Ô∏è Intervention Simulation</h2>
                    <span class="close-modal" onclick="closeModal()">&times;</span>
                </div>
                <div class="modal-body">
                    <p><strong>This is a demonstration with synthetic data.</strong></p>
                    <div class="modal-warning">
                        <strong>Important Notice:</strong> The simulated impacts shown are based on theoretical models and synthetic network data. In real-world deployment, actual intervention outcomes may vary significantly based on:
                        <ul style="margin-top: 10px;">
                            <li>Organizational culture and readiness</li>
                            <li>Resource availability and timing</li>
                            <li>Individual motivation and circumstances</li>
                            <li>External factors and competing priorities</li>
                            <li>Network structure changes over time</li>
                        </ul>
                    </div>
                    <p>We recommend pilot testing interventions with evaluation frameworks before full-scale implementation.</p>
                </div>
                <div class="modal-footer">
                    <button class="btn" onclick="closeModal()">I Understand</button>
        </div>
        
        <div class="footer">
            <div class="footer-text">
                Handcrafted by <strong>Onicio B Leal Neto</strong>, co-piloted by <a href="https://claude.ai" target="_blank">Claude (Sonnet 4.5)</a>
            </div>
            <div class="footer-logo">
                <img src="https://publichealth.arizona.edu/sites/default/files/UA_CPH_RGB_Alt.png" alt="MEZCOPH - Mel and Enid Zuckerman College of Public Health">
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let seirChart, gnnChart, interventionChart, pipelineChart;
        let simulationData = [];
        let currentDay = 0;
        let vantaEffect;
        let selectedNode = null;
        let networkFilters = {
            state: 'all',
            gender: 'all',
            location: 'all',
            role: 'all'
        };
        
        // Synthetic network data
        const nodes = [];
        const links = [];
        const numNodes = 100;
        
        // Viridis color scale for network nodes
        const viridisColors = {
            'S': '#440154',  // Dark purple (Susceptible)
            'E': '#31688e',  // Blue (Exposed)
            'I': '#35b779',  // Green (Infected/Learning)
            'R': '#fde725'   // Yellow (Recovered/Proficient)
        };
        
        // Generate synthetic network
        function generateNetwork() {
            nodes.length = 0;
            links.length = 0;
            
            const genders = ['Female', 'Male'];
            const locations = ['Urban', 'Rural', 'Tribal'];
            const roles = ['Nurse', 'Analyst', 'Manager', 'Educator', 'Technician'];
            
            for (let i = 0; i < numNodes; i++) {
                nodes.push({
                    id: i,
                    name: `Worker_${i}`,
                    gender: genders[Math.random() > 0.45 ? 0 : 1],
                    location: locations[Math.floor(Math.random() * 3)],
                    role: roles[Math.floor(Math.random() * roles.length)],
                    state: i < 20 ? 'I' : (i < 50 ? 'E' : 'S'),
                    centrality: Math.random(),
                    influence: Math.random() * 5
                });
            }
            
            for (let i = 0; i < numNodes; i++) {
                const numLinks = Math.floor(Math.random() * 5) + 2;
                for (let j = 0; j < numLinks; j++) {
                    const target = Math.floor(Math.random() * numNodes);
                    if (target !== i && !links.find(l => 
                        (l.source === i && l.target === target) || 
                        (l.source === target && l.target === i))) {
                        links.push({
                            source: i,
                            target: target,
                            weight: Math.random()
                        });
                    }
                }
            }
        }
        
        // SEIR Model simulation
        function runSEIR() {
            const beta = parseFloat(document.getElementById('beta').value);
            const sigma = parseFloat(document.getElementById('sigma').value);
            const gamma = parseFloat(document.getElementById('gamma').value);
            const N = 1000;
            
            let S = 950, E = 30, I = 20, R = 0;
            simulationData = [];
            
            for (let t = 0; t <= 200; t++) {
                simulationData.push({
                    day: t,
                    S: S,
                    E: E,
                    I: I,
                    R: R
                });
                
                const dS = -beta * S * I / N;
                const dE = beta * S * I / N - sigma * E;
                const dI = sigma * E - gamma * I;
                const dR = gamma * I;
                
                S += dS;
                E += dE;
                I += dI;
                R += dR;
                
                if (S < 0) S = 0;
                if (E < 0) E = 0;
                if (I < 0) I = 0;
            }
            
            updateSEIRChart();
            updateMetrics();
        }
        
        function updateSEIR() {
            document.getElementById('r0-val').textContent = document.getElementById('r0').value;
            document.getElementById('beta-val').textContent = document.getElementById('beta').value;
            document.getElementById('sigma-val').textContent = document.getElementById('sigma').value;
            document.getElementById('gamma-val').textContent = document.getElementById('gamma').value;
            runSEIR();
        }
        
        function resetSEIR() {
            document.getElementById('r0').value = 2.5;
            document.getElementById('beta').value = 0.3;
            document.getElementById('sigma').value = 0.2;
            document.getElementById('gamma').value = 0.15;
            updateSEIR();
        }
        
        function updateSEIRChart() {
            const ctx = document.getElementById('seir-chart');
            if (!ctx) return;
            
            if (seirChart) {
                seirChart.destroy();
            }
            
            seirChart = new Chart(ctx.getContext('2d'), {
                type: 'line',
                data: {
                    labels: simulationData.map(d => d.day),
                    datasets: [
                        {
                            label: 'Susceptible',
                            data: simulationData.map(d => d.S),
                            borderColor: '#48bb78',
                            backgroundColor: 'rgba(72, 187, 120, 0.1)',
                            fill: true,
                            tension: 0.4
                        },
                        {
                            label: 'Exposed',
                            data: simulationData.map(d => d.E),
                            borderColor: '#ed8936',
                            backgroundColor: 'rgba(237, 137, 54, 0.1)',
                            fill: true,
                            tension: 0.4
                        },
                        {
                            label: 'Infected (Learning)',
                            data: simulationData.map(d => d.I),
                            borderColor: '#f56565',
                            backgroundColor: 'rgba(245, 101, 101, 0.1)',
                            fill: true,
                            tension: 0.4
                        },
                        {
                            label: 'Recovered (Proficient)',
                            data: simulationData.map(d => d.R),
                            borderColor: '#667eea',
                            backgroundColor: 'rgba(102, 126, 234, 0.1)',
                            fill: true,
                            tension: 0.4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        title: {
                            display: true,
                            text: 'SEIR Learning Diffusion Model',
                            font: { size: 16 }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Number of Workers'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Days'
                            }
                        }
                    },
                    animation: {
                        duration: 750
                    }
                }
            });
        }
        
        function updateMetrics() {
            const lastDay = simulationData[simulationData.length - 1];
            currentDay = simulationData.length - 1;
            
            document.getElementById('current-day').textContent = currentDay;
            document.getElementById('s-count').textContent = Math.round(lastDay.S);
            document.getElementById('e-count').textContent = Math.round(lastDay.E);
            document.getElementById('i-count').textContent = Math.round(lastDay.I);
            document.getElementById('r-count').textContent = Math.round(lastDay.R);
            
            const womenProf = (lastDay.R / 1000 * 0.52 * 100).toFixed(1);
            const menProf = (lastDay.R / 1000 * 0.48 * 100).toFixed(1);
            document.getElementById('women-prof').textContent = womenProf + '%';
            document.getElementById('men-prof').textContent = menProf + '%';
            document.getElementById('gender-gap').textContent = 
                Math.abs(womenProf - menProf).toFixed(1) + '%';
            
            document.getElementById('rural-cov').textContent = 
                (lastDay.R / 1000 * 0.25 * 100).toFixed(1) + '%';
            document.getElementById('tribal-cov').textContent = 
                (lastDay.R / 1000 * 0.15 * 100).toFixed(1) + '%';
            document.getElementById('urban-cov').textContent = 
                (lastDay.R / 1000 * 0.60 * 100).toFixed(1) + '%';
        }
        
        // Network visualization
        function initNetworkViz() {
            const container = document.getElementById('network-viz');
            if (!container) return;
            
            const width = container.clientWidth;
            const height = 600;
            
            d3.select('#network-viz').selectAll('*').remove();
            selectedNode = null;
            
            // Apply filters
            const filteredNodes = filterNodes();
            const filteredLinks = filterLinks(filteredNodes);
            
            if (filteredNodes.length === 0) {
                d3.select('#network-viz')
                    .append('div')
                    .style('text-align', 'center')
                    .style('padding', '100px')
                    .style('color', '#a0aec0')
                    .html('<h3>No nodes match the current filters</h3><p>Try adjusting your filter criteria</p>');
                return;
            }
            
            const svg = d3.select('#network-viz')
                .append('svg')
                .attr('width', width)
                .attr('height', height);
            
            const g = svg.append('g');
            
            const zoom = d3.zoom()
                .scaleExtent([0.3, 3])
                .on('zoom', (event) => {
                    g.attr('transform', event.transform);
                });
            
            svg.call(zoom);
            
            const linkData = filteredLinks.map(l => ({
                source: filteredNodes.find(n => n.id === l.source),
                target: filteredNodes.find(n => n.id === l.target),
                weight: l.weight
            }));
            
            const simulation = d3.forceSimulation(filteredNodes)
                .force('link', d3.forceLink(linkData)
                    .id(d => d.id)
                    .distance(80)
                    .strength(0.5))
                .force('charge', d3.forceManyBody().strength(-200))
                .force('center', d3.forceCenter(width / 2, height / 2))
                .force('collision', d3.forceCollide().radius(20));
            
            const link = g.append('g')
                .attr('class', 'links')
                .selectAll('line')
                .data(linkData)
                .enter()
                .append('line')
                .attr('stroke', '#cbd5e0')
                .attr('stroke-width', d => d.weight * 2)
                .attr('stroke-opacity', 0.5)
                .attr('class', 'network-link');
            
            const node = g.append('g')
                .attr('class', 'nodes')
                .selectAll('circle')
                .data(filteredNodes)
                .enter()
                .append('circle')
                .attr('r', d => 6 + d.influence * 3)
                .attr('fill', d => viridisColors[d.state] || '#440154')
                .attr('stroke', d => d.gender === 'Female' ? '#e53e3e' : '#2d3748')
                .attr('stroke-width', d => d.gender === 'Female' ? 3 : 2)
                .style('cursor', 'pointer')
                .attr('class', 'network-node')
                .on('click', function(event, d) {
                    event.stopPropagation();
                    handleNodeClick(d, this, link, node, filteredNodes, linkData);
                })
                .call(d3.drag()
                    .on('start', dragstarted)
                    .on('drag', dragged)
                    .on('end', dragended));
            
            node.append('title')
                .text(d => `${d.name}\n${d.gender}, ${d.location}\n${d.role}\nState: ${d.state}\nInfluence: ${d.influence.toFixed(2)}\n\nClick to highlight connections`);
            
            const labels = g.append('g')
                .attr('class', 'labels')
                .selectAll('text')
                .data(filteredNodes.filter(d => d.influence > 3.5))
                .enter()
                .append('text')
                .text(d => d.name)
                .attr('font-size', 10)
                .attr('fill', '#2d3748')
                .attr('text-anchor', 'middle')
                .attr('dy', -15)
                .style('pointer-events', 'none');
            
            svg.on('click', function() {
                deselectNode(link, node);
            });
            
            simulation.on('tick', () => {
                link
                    .attr('x1', d => d.source.x)
                    .attr('y1', d => d.source.y)
                    .attr('x2', d => d.target.x)
                    .attr('y2', d => d.target.y);
                
                node
                    .attr('cx', d => d.x)
                    .attr('cy', d => d.y);
                    
                labels
                    .attr('x', d => d.x)
                    .attr('y', d => d.y);
            });
            
            function handleNodeClick(clickedNode, element, links, nodes, allNodes, allLinks) {
                if (selectedNode === clickedNode.id) {
                    deselectNode(links, nodes);
                    return;
                }
                
                selectedNode = clickedNode.id;
                
                const connectedNodeIds = new Set();
                connectedNodeIds.add(clickedNode.id);
                
                allLinks.forEach(l => {
                    if (l.source.id === clickedNode.id) {
                        connectedNodeIds.add(l.target.id);
                    }
                    if (l.target.id === clickedNode.id) {
                        connectedNodeIds.add(l.source.id);
                    }
                });
                
                links
                    .attr('stroke', d => {
                        if ((d.source.id === clickedNode.id || d.target.id === clickedNode.id)) {
                            return '#667eea';
                        }
                        return '#cbd5e0';
                    })
                    .attr('stroke-width', d => {
                        if ((d.source.id === clickedNode.id || d.target.id === clickedNode.id)) {
                            return 4;
                        }
                        return d.weight * 2;
                    })
                    .attr('stroke-opacity', d => {
                        if ((d.source.id === clickedNode.id || d.target.id === clickedNode.id)) {
                            return 1;
                        }
                        return 0.2;
                    });
                
                nodes
                    .attr('opacity', d => {
                        if (connectedNodeIds.has(d.id)) {
                            return 1;
                        }
                        return 0.3;
                    })
                    .attr('stroke-width', d => {
                        if (d.id === clickedNode.id) {
                            return 5;
                        }
                        if (connectedNodeIds.has(d.id)) {
                            return d.gender === 'Female' ? 3 : 2;
                        }
                        return d.gender === 'Female' ? 3 : 2;
                    });
            }
            
            function deselectNode(links, nodes) {
                selectedNode = null;
                
                links
                    .attr('stroke', '#cbd5e0')
                    .attr('stroke-width', d => d.weight * 2)
                    .attr('stroke-opacity', 0.5);
                
                nodes
                    .attr('opacity', 1)
                    .attr('stroke-width', d => d.gender === 'Female' ? 3 : 2);
            }
            
            function dragstarted(event, d) {
                if (!event.active) simulation.alphaTarget(0.3).restart();
                d.fx = d.x;
                d.fy = d.y;
            }
            
            function dragged(event, d) {
                d.fx = event.x;
                d.fy = event.y;
            }
            
            function dragended(event, d) {
                if (!event.active) simulation.alphaTarget(0);
                d.fx = null;
                d.fy = null;
            }
            
            updateInfluencersList();
        }
        
        function updateInfluencersList() {
            const topInfluencers = [...nodes]
                .sort((a, b) => b.influence - a.influence)
                .slice(0, 5);
            
            const list = document.getElementById('influencers-list');
            if (list) {
                list.innerHTML = topInfluencers.map((n, i) => `
                    <div class="metric">
                        <span class="metric-label">${i + 1}. ${n.name} (${n.gender}, ${n.location})</span>
                        <span class="metric-value">${n.influence.toFixed(2)}</span>
                    </div>
                `).join('');
            }
        }
        
        // GNN Predictions
        function initGNNChart() {
            const ctx = document.getElementById('gnn-predictions-chart');
            if (!ctx) return;
            
            const predictions = [
                { state: 'S‚ÜíE', actual: 85, predicted: 87 },
                { state: 'E‚ÜíI', actual: 78, predicted: 82 },
                { state: 'I‚ÜíR', actual: 92, predicted: 91 },
                { state: 'Stay', actual: 88, predicted: 90 }
            ];
            
            gnnChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: predictions.map(p => p.state),
                    datasets: [
                        {
                            label: 'Actual Transitions',
                            data: predictions.map(p => p.actual),
                            backgroundColor: 'rgba(102, 126, 234, 0.7)'
                        },
                        {
                            label: 'GNN Predictions',
                            data: predictions.map(p => p.predicted),
                            backgroundColor: 'rgba(237, 137, 54, 0.7)'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        title: {
                            display: true,
                            text: 'GNN Prediction Accuracy by Transition Type',
                            font: { size: 16 }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            title: {
                                display: true,
                                text: 'Accuracy (%)'
                            }
                        }
                    }
                }
            });
            
            updateHighRiskList();
        }
        
        function updateHighRiskList() {
            const highRisk = [...nodes]
                .filter(n => n.state === 'S' && n.centrality < 0.3)
                .sort((a, b) => a.centrality - b.centrality)
                .slice(0, 8);
            
            const list = document.getElementById('high-risk-list');
            if (list) {
                list.innerHTML = highRisk.map(n => `
                    <div class="metric">
                        <span class="metric-label">${n.name} - ${n.gender}, ${n.location}, ${n.role}</span>
                        <span class="metric-value" style="font-size: 1em; color: #f56565;">
                            Risk: ${(1 - n.centrality).toFixed(2)}
                        </span>
                    </div>
                `).join('');
            }
        }
        
        // Interventions
        function initInterventionChart() {
            const ctx = document.getElementById('intervention-chart');
            if (!ctx) return;
            
            interventionChart = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['Learning R‚ÇÄ', 'Gender Equity', 'Rural Reach', 'Tribal Reach', 'Speed', 'Sustainability'],
                    datasets: [
                        {
                            label: 'Baseline',
                            data: [2.5, 3, 2, 2, 3, 4],
                            borderColor: '#cbd5e0',
                            backgroundColor: 'rgba(203, 213, 224, 0.2)'
                        },
                        {
                            label: 'Peer Champions',
                            data: [3.3, 4.5, 3.8, 2.5, 3.5, 4.5],
                            borderColor: '#667eea',
                            backgroundColor: 'rgba(102, 126, 234, 0.2)'
                        },
                        {
                            label: 'Bridge Training',
                            data: [3.1, 3.2, 3.2, 4.5, 3.8, 3.8],
                            borderColor: '#ed8936',
                            backgroundColor: 'rgba(237, 137, 54, 0.2)'
                        },
                        {
                            label: 'Micro-Cohorts',
                            data: [3.7, 4.8, 3.5, 3.0, 4.5, 4.2],
                            borderColor: '#48bb78',
                            backgroundColor: 'rgba(72, 187, 120, 0.2)'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        title: {
                            display: true,
                            text: 'Intervention Impact Comparison (Scale 1-5)',
                            font: { size: 16 }
                        }
                    },
                    scales: {
                        r: {
                            beginAtZero: true,
                            max: 5
                        }
                    }
                }
            });
        }
        
        function applyIntervention(type) {
            const modal = document.getElementById('intervention-modal');
            modal.style.display = 'block';
        }
        
        function closeModal() {
            const modal = document.getElementById('intervention-modal');
            modal.style.display = 'none';
        }
        
        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('intervention-modal');
            if (event.target == modal) {
                modal.style.display = 'none';
            }
        }
        
        // Network filter functions
        function applyNetworkFilters() {
            networkFilters.state = document.getElementById('filter-state').value;
            networkFilters.gender = document.getElementById('filter-gender').value;
            networkFilters.location = document.getElementById('filter-location').value;
            networkFilters.role = document.getElementById('filter-role').value;
            initNetworkViz();
        }
        
        function resetNetworkFilters() {
            networkFilters = { state: 'all', gender: 'all', location: 'all', role: 'all' };
            document.getElementById('filter-state').value = 'all';
            document.getElementById('filter-gender').value = 'all';
            document.getElementById('filter-location').value = 'all';
            document.getElementById('filter-role').value = 'all';
            initNetworkViz();
        }
        
        function filterNodes() {
            return nodes.filter(n => {
                if (networkFilters.state !== 'all' && n.state !== networkFilters.state) return false;
                if (networkFilters.gender !== 'all' && n.gender !== networkFilters.gender) return false;
                if (networkFilters.location !== 'all' && n.location !== networkFilters.location) return false;
                if (networkFilters.role !== 'all' && n.role !== networkFilters.role) return false;
                return true;
            });
        }
        
        function filterLinks(filteredNodes) {
            const nodeIds = new Set(filteredNodes.map(n => n.id));
            return links.filter(l => nodeIds.has(l.source) && nodeIds.has(l.target));
        }
        
        // Tab switching
        function switchTab(tabName) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(tabName).classList.add('active');
            
            // Reinitialize network viz when switching to network tab
            if (tabName === 'network') {
                setTimeout(() => initNetworkViz(), 100);
            }
        }
        
        // Add event listeners to sliders
        function setupSliderListeners() {
            const sliders = ['r0', 'beta', 'sigma', 'gamma'];
            sliders.forEach(id => {
                const slider = document.getElementById(id);
                if (slider) {
                    slider.addEventListener('input', function() {
                        updateSEIR();
                    });
                    slider.addEventListener('change', function() {
                        updateSEIR();
                    });
                }
            });
        }
        
        // Initialize
        window.onload = function() {
            // Initialize Vanta.js background
            try {
                if (typeof VANTA !== 'undefined') {
                    vantaEffect = VANTA.NET({
                        el: "#vanta-bg",
                        mouseControls: true,
                        touchControls: true,
                        gyroControls: false,
                        minHeight: 200.00,
                        minWidth: 200.00,
                        scale: 1.00,
                        scaleMobile: 1.00,
                        color: 0x667eea,
                        backgroundColor: 0x0f0f23,
                        points: 15.00,
                        maxDistance: 25.00,
                        spacing: 18.00
                    });
                }
            } catch (e) {
                console.log("Vanta.js initialization error:", e);
            }
            
            generateNetwork();
            setupSliderListeners();
            runSEIR();
            initNetworkViz();
            initGNNChart();
            initInterventionChart();
            initPipelineChart();
        };
        
        // Clean up Vanta on page unload
        window.addEventListener('beforeunload', function() {
            if (vantaEffect) vantaEffect.destroy();
        });
    </script>
    
    <div class="footer">
        <div class="footer-text">
            Handcrafted by <strong>Onicio B Leal Neto</strong>, co-piloted by <a href="https://claude.ai" target="_blank">Claude (Sonnet 4.5)</a>
        </div>
        <div class="footer-logo">
            <img src="https://publichealth.arizona.edu/sites/default/files/UA_CPH_RGB_Alt.png" alt="MEZCOPH - Mel and Enid Zuckerman College of Public Health">
        </div>
    </div>
</body>
</html>